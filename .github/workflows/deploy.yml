name: easyWord CI/CD

on:
  pull_request:
    types: [closed]
  workflow_dispatch: # 수동 실행도 가능

jobs:
  build:
    runs-on: ubuntu-latest
    if: |
      github.event.pull_request.merged == true && (
        github.event.pull_request.base.ref == 'develop' || 
        github.event.pull_request.base.ref == 'main'
      )  # 'develop' 또는 'main' 브랜치에 머지된 경우

    env:
      KAKAO_REST_API_KEY: ${{ secrets.KAKAO_REST_API_KEY }}  # GitHub Secrets에서 가져오기
      KAKAO_CLIENT_SECRET: ${{ secrets.KAKAO_CLIENT_SECRET }}  # GitHub Secrets에서 가져오기
      KAKAO_REDIRECT_URI: ${{ secrets.KAKAO_REDIRECT_URI }}  # GitHub Secrets에서 가져오기